<!--
 * @Description: 
 * @Author: chenju
 * @Date: 2021-04-27 16:21:57
 * @LastEditors: chenju
 * @LastEditTime: 2021-04-27 16:48:12
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    // let arr = [9, 8, 4, 1, 3, 2, 6, 5, 7]
    let arr = [3,2,4,1]

    function reverse(arr, n, ind) {
      for(let i = 0, j = n - 1; i < j; i++, j--) {
        let left = arr[i];
        let right = arr[j];
        arr[i] = right;
        arr[j] = left
        ind[arr[i]] = i
        ind[arr[j]] = j
      }
    }
    var pancakeSort = function(arr) {
      let ind = []
      let ret = [];
      for(let i = 0; i < arr.length; i++) ind[arr[i]] = i;

      for(let i = arr.length; i >= 1; i--) {
        if(ind[i] === i - 1) continue;
        if(ind[i] + 1 !== 1) {
          ret.push(ind[i] + 1)
          reverse(arr, ind[i] + 1, ind)
        }
        if(i !== 1) {
          ret.push(i)
          reverse(arr, i, ind)
        }
      }
      return ret;
    };

    console.log('pancakeSort', pancakeSort(arr).join(''))
  </script>
</head>
<body>
  
</body>
</html>